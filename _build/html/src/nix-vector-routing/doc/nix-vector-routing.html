<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Nix-Vector Routing Documentation &#8212; ns-3 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="nix-vector-routing-documentation">
<h1>Nix-Vector Routing Documentation<a class="headerlink" href="#nix-vector-routing-documentation" title="Link to this heading">¶</a></h1>
<p>Nix-vector routing is a simulation specific routing protocol and is
intended for large network topologies.  The on-demand nature of this
protocol as well as the low-memory footprint of the nix-vector provides
improved performance in terms of memory usage and simulation run time
when dealing with a large number of nodes.</p>
<section id="model-description">
<h2>Model Description<a class="headerlink" href="#model-description" title="Link to this heading">¶</a></h2>
<p>The source code for the NixVectorRouting module lives in
the directory <code class="docutils literal notranslate"><span class="pre">src/nix-vector-routing</span></code>.</p>
<p><a href="#id1"><span class="problematic" id="id2">|ns3|</span></a> nix-vector-routing performs on-demand route computation using
a breadth-first search and an efficient route-storage data structure
known as a nix-vector.</p>
<p>When a packet is generated at a node for transmission, the route is
calculated, and the nix-vector is built.</p>
<p><strong>How is the Nix-Vector calculated?</strong>
The nix-vector stores an index for each hop along the path, which
corresponds to the neighbor-index.  This index is used to determine
which net-device and gateway should be used.</p>
<p><strong>How does the routing take place?</strong>
To route a packet, the nix-vector must be transmitted with the packet.
At each hop, the current node extracts the appropriate neighbor-index
from the nix-vector and transmits the packet through the corresponding
net-device. This continues until the packet reaches the destination.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nix-Vector routing does not use any routing metrics (interface metrics)
during the calculation of nix-vector. It is only based on the shortest
path calculated according to BFS.</p>
</div>
<p><strong>How does Nix decide between two equally short path from source to
destination?</strong>
It depends on how the topology is constructed i.e., the order in which the
net-devices are added on a node and net-devices added on the channels
associated with current node’s net-devices. Please check the <code class="docutils literal notranslate"><span class="pre">nix-simple.cc</span></code>
example below to understand how nix-vectors are calculated.</p>
<p><strong>How does Nix reacts to topology changes?</strong>
Routes in Nix are specific to a given network topology, and are cached by
the sender node. Nix monitors the following events: Interface up/down,
Route add/removal, Address add/removal to understand if the cached routes
are valid or if they have to be purged.</p>
<p>If the topology changes while the packet is “in flight”, the associated
NixVector is invalid, and have to be rebuilt by an intermediate node.
This is possible because the NixVecor carries an “Epoch”, i.e., a counter
indicating when the NixVector has been created. If the topology changes,
the Epoch is globally updated, and any outdated NixVector is rebuilt.</p>
<p><a href="#id3"><span class="problematic" id="id4">|ns3|</span></a> supports IPv4 as well as IPv6 Nix-Vector routing.</p>
<section id="scope-and-limitations">
<h3>Scope and Limitations<a class="headerlink" href="#scope-and-limitations" title="Link to this heading">¶</a></h3>
<p>Currently, the <a href="#id5"><span class="problematic" id="id6">|ns3|</span></a> model of nix-vector routing supports IPv4 and IPv6
p2p links, CSMA links and multiple WiFi networks with the same channel object.
It does not (yet) provide support for efficient adaptation to link failures.
It simply flushes all nix-vector routing caches.</p>
<p>NixVectorRouting performs a subnet matching check, but it does <strong>not</strong> check
entirely if the addresses have been appropriately assigned. In other terms,
using Nix-Vector routing, it is possible to have a working network that
violates some good practices in IP address assignments.</p>
<p>In case of IPv6, Nix assumes the link-local addresses assigned are <strong>unique</strong>.
When using the IPv6 stack, the link-local address allocation is unique by
default over the entire topology. However, if the link-local addresses are
assigned manually, the user must ensure uniqueness of link-local addresses.</p>
<p>NixVectorRouting supports routes to IPv4 and IPv6 loopback addresses on localhost.
Although it is not really intended to route to these addresses, it can do so.</p>
</section>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>The usage pattern is the one of all the Internet routing protocols.
Since NixVectorRouting is not installed by default in the
Internet stack, it is necessary to set it in the Internet Stack
helper by using <code class="docutils literal notranslate"><span class="pre">InternetStackHelper::SetRoutingHelper</span></code>.</p>
<p>Remember to include the header file <code class="docutils literal notranslate"><span class="pre">ns3/nix-vector-routing-module.h</span></code> to
use IPv4 or IPv6 Nix-Vector routing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The previous header files <code class="docutils literal notranslate"><span class="pre">ns3/ipv4-nix-vector-helper.h</span></code> and
<code class="docutils literal notranslate"><span class="pre">ns3/ipv4-nix-vector-routing.h</span></code> are deprecated and will be removed in
the future. These files are replaced with more generic (having IPv6
capabilities) <code class="docutils literal notranslate"><span class="pre">ns3/nix-vector-helper.h</span></code> and <code class="docutils literal notranslate"><span class="pre">ns3/nix-vector-routing.h</span></code>
respectively.</p>
</div>
<ul class="simple">
<li><p>Using IPv4 Nix-Vector Routing:</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Ipv4NixVectorHelper</span><span class="w"> </span><span class="n">nixRouting</span><span class="p">;</span>
<span class="n">InternetStackHelper</span><span class="w"> </span><span class="n">stack</span><span class="p">;</span>
<span class="n">stack</span><span class="p">.</span><span class="n">SetRoutingHelper</span><span class="p">(</span><span class="n">nixRouting</span><span class="p">);</span><span class="w">  </span><span class="c1">// has effect on the next Install()</span>
<span class="n">stack</span><span class="p">.</span><span class="n">Install</span><span class="p">(</span><span class="n">allNodes</span><span class="p">);</span><span class="w">             </span><span class="c1">// allNodes is the NodeContainer</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Using IPv6 Nix-Vector Routing:</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Ipv6NixVectorHelper</span><span class="w"> </span><span class="n">nixRouting</span><span class="p">;</span>
<span class="n">InternetStackHelper</span><span class="w"> </span><span class="n">stack</span><span class="p">;</span>
<span class="n">stack</span><span class="p">.</span><span class="n">SetRoutingHelper</span><span class="p">(</span><span class="n">nixRouting</span><span class="p">);</span><span class="w">  </span><span class="c1">// has effect on the next Install()</span>
<span class="n">stack</span><span class="p">.</span><span class="n">Install</span><span class="p">(</span><span class="n">allNodes</span><span class="p">);</span><span class="w">             </span><span class="c1">// allNodes is the NodeContainer</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The NixVectorHelper helper class helps to use NixVectorRouting functionality.
The NixVectorRouting model class can also be used directly to use Nix-Vector routing.
<code class="docutils literal notranslate"><span class="pre">ns3/nix-vector-routing-module.h</span></code> contains the header files for both the classes.</p>
</div>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<p>The examples for the NixVectorRouting module lives in
the directory <code class="docutils literal notranslate"><span class="pre">src/nix-vector-routing/examples</span></code>.</p>
<p>There are examples which use both IPv4 and IPv6 networking.</p>
<ol class="arabic simple">
<li><p>nix-simple.cc</p></li>
</ol>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> *    ________</span>
<span class="cm"> *   /        \</span>
<span class="cm"> * n0 -- n1 -- n2 -- n3</span>
<span class="cm"> *</span>
<span class="cm"> * n0 IP: 10.1.1.1, 10.1.4.1</span>
<span class="cm"> * n1 IP: 10.1.1.2, 10.1.2.1</span>
<span class="cm"> * n2 IP: 10.1.2.2, 10.1.3.1, 10.1.4.2</span>
<span class="cm"> * n3 IP: 10.1.3.2</span>
<span class="cm"> */</span>
</pre></div>
</div>
<p>In this topology, we install Nix-Vector routing between source
n0 and destination n3. The shortest possible route will be
n0 -&gt; n2 -&gt; n3.</p>
<p>Let’s see how the nix-vector will be generated for this path:</p>
<p>n0 has 2 neighbors i.e. n1 and n3. n0 is connected to both using
separate net-devices. But the net-device for n0 – n1 p2p link was
created before the netdevice for n0 – n2 p2p link. Thus, n2 has
neighbor-index of 1 (n1 has 0) with respect to n0.</p>
<p>n2 has 3 neighbors i.e. n1, n3 and n0. The n2 net-device for n1 – n2
p2p link was created before the n2 net-device for n2 – n3 p2p link
which was before the n2 netdevice for n0 – n2 p2p link. This, n3
has neighbor-index of 01 (n1 has 00 and n0 has 10) with respect to n2.</p>
<p>Thus, the nix-vector for the path from n0 to n3 is 101.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This neighbor-index or nix-index has total number of bits equal to
minimum number of bits required to represent all the neighbors in
their binary form.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there are multiple netdevices connected to the current netdevice
on the channel then it depends on which order netdevices were added
to the channel.</p>
</div>
<ol class="loweralpha">
<li><p>Using IPv4:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># By default IPv4 network is selected</span>
./ns3<span class="w"> </span>run<span class="w"> </span>nix-simple
</pre></div>
</div>
</li>
<li><p>Using IPv6:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the --useIPv6 flag</span>
./ns3<span class="w"> </span>run<span class="w"> </span><span class="s2">&quot;nix-simple --useIPv6&quot;</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>nms-p2p-nix.cc</p>
<p>This example demonstrates the advantage of Nix-Vector routing as Nix
performs source-based routing (BFS) to have faster routing.</p>
<img alt="NMS P2P Network Diagram" src="../../../_images/nms.png" />
<ol class="loweralpha">
<li><p>Using IPv4:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># By default IPv4 network is selected</span>
./ns3<span class="w"> </span>run<span class="w"> </span>nms-p2p-nix
</pre></div>
</div>
</li>
<li><p>Using IPv6:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the --useIPv6 flag</span>
./ns3<span class="w"> </span>run<span class="w"> </span><span class="s2">&quot;nms-p2p-nix --useIPv6&quot;</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>nix-simple-multi-address.cc</p></li>
</ol>
<blockquote>
<div><p>This is an IPv4 example demonstrating multiple interface addresses. This
example also shows how address assignment in between the simulation causes
the all the route caches and Nix caches to flush.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># By default IPv4 network is selected</span>
./ns3<span class="w"> </span>run<span class="w"> </span>nix-simple-multi-address
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>nix-double-wifi.cc</p></li>
</ol>
<blockquote>
<div><p>This example demonstrates the working of Nix with two Wifi networks
operating on the same Wifi channel object. The example uses <code class="docutils literal notranslate"><span class="pre">ns3::YansWifiChannel</span></code>
for both the wifi networks.</p>
<ol class="loweralpha">
<li><p>Using IPv4:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># By default IPv4 network is selected</span>
./ns3<span class="w"> </span>run<span class="w"> </span>nix-double-wifi
<span class="c1"># Use the --enableNixLog to enable NixVectorRouting logging.</span>
./ns3<span class="w"> </span>run<span class="w"> </span><span class="s2">&quot;nix-double-wifi --enableNixLog&quot;</span>
</pre></div>
</div>
</li>
<li><p>Using IPv6:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the --useIPv6 flag</span>
./ns3<span class="w"> </span>run<span class="w"> </span><span class="s2">&quot;nix-double-wifi --useIPv6&quot;</span>
<span class="c1"># Use the --enableNixLog to enable NixVectorRouting logging.</span>
./ns3<span class="w"> </span>run<span class="w"> </span><span class="s2">&quot;nix-double-wifi --useIPv6 --enableNixLog&quot;</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">ns-3</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, vishnu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/src/nix-vector-routing/doc/nix-vector-routing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>