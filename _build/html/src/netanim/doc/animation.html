<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Animation &#8212; ns-3 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<section id="animation">
<h1>Animation<a class="headerlink" href="#animation" title="Link to this heading">¶</a></h1>
<p>Animation is an important tool for network simulation. While <a href="#id4"><span class="problematic" id="id5">|ns3|</span></a> does not
contain a default graphical animation tool, we currently have two ways to provide
animation, namely using the PyViz method or the NetAnim method.
The PyViz method is described in <a class="reference external" href="http://www.nsnam.org/wiki/PyViz">http://www.nsnam.org/wiki/PyViz</a>.</p>
<p>We will describe the NetAnim method briefly here.</p>
<section id="netanim">
<h2>NetAnim<a class="headerlink" href="#netanim" title="Link to this heading">¶</a></h2>
<p>NetAnim is a standalone, Qt5-based software executable that uses a trace file generated during
an <a href="#id6"><span class="problematic" id="id7">|ns3|</span></a> simulation to display the topology and animate the packet flow between nodes.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../../_images/NetAnim_3_105.png"><img alt="../../../_images/NetAnim_3_105.png" src="../../../_images/NetAnim_3_105.png" style="width: 500px; height: 400px;" /></a>
<figcaption>
<p><span class="caption-text">An example of packet animation on wired-links</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>In addition, NetAnim also provides useful features such as tables to display meta-data of packets like the image below</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../../../_images/PacketStatistics.png"><img alt="../../../_images/PacketStatistics.png" src="../../../_images/PacketStatistics.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">An example of tables for packet meta-data with protocol filters</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>A way to visualize the trajectory of a mobile node</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../../_images/Trajectory.png"><img alt="../../../_images/Trajectory.png" src="../../../_images/Trajectory.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">An example of the trajectory of a mobile node</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>A way to display the routing-tables of multiple nodes at various points in time</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../_images/RoutingTables.png"><img alt="../../../_images/RoutingTables.png" src="../../../_images/RoutingTables.png" style="width: 500px;" /></a>
</figure>
<p>A way to display counters associated with multiple nodes as a chart or a table</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../_images/NodeCountersChart.png"><img alt="../../../_images/NodeCountersChart.png" src="../../../_images/NodeCountersChart.png" style="width: 500px;" /></a>
</figure>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../_images/NodeCountersTable.png"><img alt="../../../_images/NodeCountersTable.png" src="../../../_images/NodeCountersTable.png" style="width: 500px;" /></a>
</figure>
<p>A way to view the timeline of packet transmit and receive events</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../_images/PacketTimeline.png"><img alt="../../../_images/PacketTimeline.png" src="../../../_images/PacketTimeline.png" style="width: 500px;" /></a>
</figure>
<section id="methodology">
<h3>Methodology<a class="headerlink" href="#methodology" title="Link to this heading">¶</a></h3>
<p>The class ns3::AnimationInterface is responsible for the creation the trace XML file.
AnimationInterface uses the tracing infrastructure to track packet flows between nodes.
AnimationInterface registers itself as a trace hook for tx and rx events before the simulation
begins. When a packet is scheduled for transmission or reception, the corresponding tx and rx
trace hooks in AnimationInterface are called. When the rx hooks are called, AnimationInterface will be aware of the two endpoints between which a packet has flowed, and adds this information
to the trace file, in XML format along with the corresponding tx and rx timestamps. The XML format
will be discussed in a later section. It is important to note that AnimationInterface records a
packet only if the rx trace hooks are called. Every tx event must be matched by an rx event.</p>
</section>
<section id="downloading-netanim">
<h3>Downloading NetAnim<a class="headerlink" href="#downloading-netanim" title="Link to this heading">¶</a></h3>
<p>If NetAnim is not already available in the <a href="#id8"><span class="problematic" id="id9">|ns3|</span></a> package you downloaded, you can do the following:</p>
<p>The latest version of NetAnim can be downloaded using git with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.com/nsnam/netanim.git
</pre></div>
</div>
</section>
<section id="building-netanim">
<h3>Building NetAnim<a class="headerlink" href="#building-netanim" title="Link to this heading">¶</a></h3>
<section id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">¶</a></h4>
<p>Qt5 (5.4 and over) is required to build NetAnim. The ns-3 Installation Guide
lists some packages to install for some
<a class="reference external" href="https://www.nsnam.org/docs/installation/html/linux.html#optional">Linux</a> systems,
for <cite>macOS &lt;https://www.nsnam.org/docs/installation/html/macos.html#optional&gt;</cite>, and
for <a class="reference external" href="https://www.nsnam.org/docs/installation/html/windows.html">Windows</a>.</p>
<p>The <a class="reference external" href="https://www.qt.io/download">Qt site</a> also provides download options.</p>
</section>
<section id="build-steps">
<h4>Build steps<a class="headerlink" href="#build-steps" title="Link to this heading">¶</a></h4>
<p>To build NetAnim use the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>netanim
$<span class="w"> </span>make<span class="w"> </span>clean
$<span class="w"> </span>qmake<span class="w"> </span>NetAnim.pro
$<span class="w"> </span>make
</pre></div>
</div>
<p>Note: qmake could be “qmake-qt5” in some systems</p>
<p>This should create an executable named “NetAnim” in the same directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>NetAnim
-rwxr-xr-x<span class="w"> </span><span class="m">1</span><span class="w"> </span>john<span class="w"> </span>john<span class="w"> </span><span class="m">390395</span><span class="w"> </span><span class="m">2012</span>-05-22<span class="w"> </span><span class="m">08</span>:32<span class="w"> </span>NetAnim
</pre></div>
</div>
</section>
</section>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h3>
<p>Using NetAnim is a two-step process</p>
<p>Step 1:Generate the animation XML trace file during simulation using “ns3::AnimationInterface” in the <a href="#id10"><span class="problematic" id="id11">|ns3|</span></a> code base.</p>
<p>Step 2:Load the XML trace file generated in Step 1 with the offline Qt4-based animator named NetAnim.</p>
<section id="step-1-generate-xml-animation-trace-file">
<h4>Step 1: Generate XML animation trace file<a class="headerlink" href="#step-1-generate-xml-animation-trace-file" title="Link to this heading">¶</a></h4>
<p>The class “AnimationInterface” under “src/netanim” uses underlying <a href="#id12"><span class="problematic" id="id13">|ns3|</span></a> trace sources
to construct a timestamped ASCII file in XML format.</p>
<p>Examples are found under src/netanim/examples
Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>configure<span class="w"> </span>-d<span class="w"> </span>debug<span class="w"> </span>--enable-examples
$<span class="w"> </span>./ns3<span class="w"> </span>run<span class="w"> </span><span class="s2">&quot;dumbbell-animation&quot;</span>
</pre></div>
</div>
<p>The above will create an XML file dumbbell-animation.xml</p>
<section id="mandatory">
<h5>Mandatory<a class="headerlink" href="#mandatory" title="Link to this heading">¶</a></h5>
<ol class="arabic simple">
<li><p>Ensure that your program’s CMakeLists.txt includes the “netanim” module. An example of such a CMakeLists.txt is at src/netanim/examples/CMakeLists.txt.</p></li>
<li><p>Include the header [#include “ns3/netanim-module.h”] in your test program</p></li>
<li><p>Add the statement</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AnimationInterface</span><span class="w"> </span><span class="n">anim</span><span class="p">(</span><span class="s">&quot;animation.xml&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// where &quot;animation.xml&quot; is any arbitrary filename</span>
</pre></div>
</div>
<p>[for versions before ns-3.13 you also have to use the line “anim.SetXMLOutput() to set the XML mode and also use anim.StartAnimation();]</p>
</section>
<section id="optional">
<h5>Optional<a class="headerlink" href="#optional" title="Link to this heading">¶</a></h5>
<p>The following are optional but useful steps:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 1</span>
<span class="n">anim</span><span class="p">.</span><span class="n">SetMobilityPollInterval</span><span class="p">(</span><span class="n">Seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
</pre></div>
</div>
<p>AnimationInterface records the position of all nodes every 250 ms by default. The statement above sets
the periodic interval at which AnimationInterface records the position of all nodes. If the nodes are
expected to move very little, it is useful to set a high mobility poll interval to avoid large XML files.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 2</span>
<span class="n">anim</span><span class="p">.</span><span class="n">SetConstantPosition</span><span class="p">(</span><span class="n">Ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
<p>AnimationInterface requires that the position of all nodes be set. In <a href="#id14"><span class="problematic" id="id15">|ns3|</span></a> this is done by setting an associated MobilityModel. “SetConstantPosition” is a quick way to set the x-y coordinates of a node which is stationary.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 3</span>
<span class="n">anim</span><span class="p">.</span><span class="n">SetStartTime</span><span class="p">(</span><span class="n">Seconds</span><span class="p">(</span><span class="mi">150</span><span class="p">));</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">anim</span><span class="p">.</span><span class="n">SetStopTime</span><span class="p">(</span><span class="n">Seconds</span><span class="p">(</span><span class="mi">150</span><span class="p">));</span>
</pre></div>
</div>
<p>AnimationInterface can generate large XML files. The above statements restricts the window between which AnimationInterface does tracing. Restricting the window serves to focus only on relevant portions of the simulation and creating manageably small XML files</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 4</span>
<span class="n">AnimationInterface</span><span class="w"> </span><span class="n">anim</span><span class="p">(</span><span class="s">&quot;animation.xml&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">50000</span><span class="p">);</span>
</pre></div>
</div>
<p>Using the above constructor ensures that each animation XML trace file has only 50000 packets. For example, if AnimationInterface captures 150000 packets, using the above constructor splits the capture into 3 files</p>
<ul class="simple">
<li><p>animation.xml - containing the packet range 1-50000</p></li>
<li><p>animation.xml-1 - containing the packet range 50001-100000</p></li>
<li><p>animation.xml-2 - containing the packet range 100001-150000</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 5</span>
<span class="n">anim</span><span class="p">.</span><span class="n">EnablePacketMetadata</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface records the meta-data of each packet in the xml trace file. Metadata can be used by NetAnim to provide better statistics and filter, along with providing some brief information about the packet such as TCP sequence number or source &amp; destination IP address during packet animation.</p>
<p>CAUTION: Enabling this feature will result in larger XML trace files.
Please do NOT enable this feature when using Wimax links.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 6</span>
<span class="n">anim</span><span class="p">.</span><span class="n">UpdateNodeDescription</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Access-point&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface assigns the text “Access-point” to node 5.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 7</span>
<span class="n">anim</span><span class="p">.</span><span class="n">UpdateNodeSize</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.5</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface sets the node size to scale by 1.5. NetAnim automatically scales the graphics view to fit the oboundaries of the topology. This means that NetAnim, can abnormally scale a node’s size too high or too low. Using AnimationInterface::UpdateNodeSize allows you to overwrite the default scaling in NetAnim and use your own custom scale.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 8</span>
<span class="n">anim</span><span class="p">.</span><span class="n">UpdateNodeCounter</span><span class="p">(</span><span class="mi">89</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mf">3.4</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface sets the counter with Id == 89, associated with Node 7 with the value 3.4.
The counter with Id 89 is obtained using AnimationInterface::AddNodeCounter. An example usage for this is in src/netanim/examples/resource-counters.cc.</p>
</section>
</section>
<section id="step-2-loading-the-xml-in-netanim">
<h4>Step 2: Loading the XML in NetAnim<a class="headerlink" href="#step-2-loading-the-xml-in-netanim" title="Link to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Assuming NetAnim was built, use the command “./NetAnim” to launch NetAnim. Please review the section “Building NetAnim” if NetAnim is not available.</p></li>
<li><p>When NetAnim is opened, click on the File open button at the top-left corner, select the XML file generated during Step 1.</p></li>
<li><p>Hit the green play button to begin animation.</p></li>
</ol>
<p>Here is a video illustrating this
<a class="reference external" href="http://www.youtube.com/watch?v=tz_hUuNwFDs">http://www.youtube.com/watch?v=tz_hUuNwFDs</a></p>
</section>
</section>
<section id="wiki">
<h3>Wiki<a class="headerlink" href="#wiki" title="Link to this heading">¶</a></h3>
<p>For detailed instructions on installing “NetAnim”, F.A.Qs and loading the XML trace file
(mentioned earlier) using NetAnim please refer:
<a class="reference external" href="http://www.nsnam.org/wiki/NetAnim">http://www.nsnam.org/wiki/NetAnim</a></p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">ns-3</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, vishnu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/src/netanim/doc/animation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>